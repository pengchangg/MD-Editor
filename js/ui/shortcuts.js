const ShortcutsModule={init:function(){document.addEventListener("keydown",this.handleKeyDown.bind(this))},handleKeyDown:function(e){window.AppConfig||(console.warn("AppConfig 未定义，使用默认配置"),window.AppConfig={isMac:navigator.platform.toUpperCase().indexOf("MAC")>=0,modKey:navigator.platform.toUpperCase().indexOf("MAC")>=0?"⌘":"Ctrl",altKey:navigator.platform.toUpperCase().indexOf("MAC")>=0?"⌥":"Alt"});const t=window.AppConfig.isMac,n=document.activeElement===window.AppElements.editor,i=t?e.metaKey:e.ctrlKey;if(i&&"z"===e.key&&!e.shiftKey&&(e.preventDefault(),HistoryModule.undo()),(i&&"y"===e.key||i&&e.shiftKey&&"z"===e.key)&&(e.preventDefault(),HistoryModule.redo()),i&&"s"===e.key&&(e.preventDefault(),Storage.saveContent()),n){if(i&&"b"===e.key&&(e.preventDefault(),UIUtils.insertText("**","**","粗体文本")),i&&"i"===e.key&&(e.preventDefault(),UIUtils.insertText("*","*","斜体文本")),i&&"k"===e.key&&(e.preventDefault(),UIUtils.insertText("[","](https://example.com)","链接文本")),i&&e.shiftKey&&"I"===e.key&&(e.preventDefault(),UIUtils.insertText("![","](https://example.com/image.jpg)","图片描述")),i&&e.shiftKey&&"C"===e.key&&(e.preventDefault(),UIUtils.insertText("```\n","\n```","代码块")),i&&"`"===e.key&&(e.preventDefault(),UIUtils.insertText("`","`","行内代码")),i&&e.shiftKey&&"B"===e.key&&(e.preventDefault(),UIUtils.insertText("> ","","引用文本")),i&&e.shiftKey&&"L"===e.key&&(e.preventDefault(),UIUtils.insertText("- ","","列表项")),i&&e.shiftKey&&"O"===e.key&&(e.preventDefault(),UIUtils.insertText("1. ","","列表项")),i&&e.shiftKey&&"T"===e.key){e.preventDefault();const t="| 标题1 | 标题2 | 标题3 |\n| ----- | ----- | ----- |\n| 内容1 | 内容2 | 内容3 |\n| 内容4 | 内容5 | 内容6 |";UIUtils.insertText("","",t)}if(i&&e.key>="1"&&e.key<="6"){e.preventDefault();const t=e.key,n="#".repeat(parseInt(t))+" ";UIUtils.insertText(n,"","标题")}i&&e.shiftKey&&"X"===e.key&&(e.preventDefault(),UIUtils.insertText("~~","~~","删除线文本")),i&&e.shiftKey&&"H"===e.key&&(e.preventDefault(),UIUtils.insertText("\n---\n","","")),i&&e.shiftKey&&"K"===e.key&&(e.preventDefault(),UIUtils.insertText("- [ ] ","","任务项"))}"Escape"===e.key&&"block"===document.getElementById("shortcut-help").style.display&&(document.getElementById("shortcut-help").style.display="none")}};