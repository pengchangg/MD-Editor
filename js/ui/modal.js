const ModalModule={init:function(){console.log("模态框模块初始化");const t=document.getElementById("shortcut-help"),e=document.getElementById("help-btn"),o=t.querySelector(".close"),n=document.getElementById("shortcut-table").querySelector("tbody");e.addEventListener("click",(()=>{this.generateShortcutTable(n),this.openModal(t)})),o.addEventListener("click",(()=>{this.closeModal(t)})),this.bindGlobalEvents()},bindGlobalEvents:function(){document.addEventListener("click",(t=>{t.target.classList.contains("modal")&&this.closeModal(t.target)})),document.addEventListener("keydown",(t=>{if("Escape"===t.key){const t=document.querySelectorAll(".modal.show");t.length>0&&this.closeModal(t[t.length-1])}}))},openModal:function(t){if(!t)return;t.classList.add("show"),t.style.display="block",document.body.classList.add("modal-open");const e=new CustomEvent("modal:open",{detail:{modal:t}});document.dispatchEvent(e)},closeModal:function(t){if(!t)return;t.classList.remove("show"),t.style.display="none";0===document.querySelectorAll(".modal.show").length&&document.body.classList.remove("modal-open");const e=new CustomEvent("modal:close",{detail:{modal:t}});document.dispatchEvent(e);const o=new CustomEvent("modalClosed");t.dispatchEvent(o)},generateShortcutTable:function(t){const e=window.AppConfig.modKey;t.innerHTML="";[{key:`${e}+B`,action:"粗体"},{key:`${e}+I`,action:"斜体"},{key:`${e}+K`,action:"链接"},{key:`${e}+Shift+I`,action:"图片"},{key:`${e}+\``,action:"行内代码"},{key:`${e}+Shift+C`,action:"代码块"},{key:`${e}+Shift+B`,action:"引用块"},{key:`${e}+Shift+L`,action:"无序列表"},{key:`${e}+Shift+O`,action:"有序列表"},{key:`${e}+Shift+T`,action:"表格"},{key:`${e}+1 到 ${e}+6`,action:"标题 1-6"},{key:`${e}+Shift+X`,action:"删除线"},{key:`${e}+Shift+H`,action:"水平分割线"},{key:`${e}+Shift+K`,action:"任务列表"},{key:`${e}+S`,action:"保存"},{key:`${e}+Z`,action:"撤销"},{key:`${e}+Y 或 ${e}+Shift+Z`,action:"重做"}].forEach((e=>{const o=document.createElement("tr"),n=document.createElement("td"),c=document.createElement("td");n.textContent=e.key,c.textContent=e.action,o.appendChild(n),o.appendChild(c),t.appendChild(o)}))}};