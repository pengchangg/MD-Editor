document.addEventListener("DOMContentLoaded",(function(){const e=navigator.platform.toUpperCase().indexOf("MAC")>=0,t=e?"⌘":"Ctrl";let n={text:"",title:""};function o(e,t,n){let o;return function(){const i=this,r=arguments,s=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||e.apply(i,r)}),t),s&&e.apply(i,r)}}Split([".editor",".preview"],{sizes:[50,50],minSize:300,gutterSize:10});const i=document.getElementById("editor"),r=document.getElementById("preview"),s=document.getElementById("line-numbers"),d=document.querySelector(".editor-status"),l=document.querySelector(".cursor-position"),c=document.querySelector(".autosave-status"),a=document.querySelector(".save-message"),m=document.getElementById("notification"),u=document.getElementById("undo-btn"),h=document.getElementById("redo-btn"),f=document.getElementById("autosave-btn"),p={states:[],currentIndex:-1,maxStates:100,isUndoRedo:!1,lastState:null,addState:function(e){this.isUndoRedo?this.isUndoRedo=!1:this.lastState!==e&&(this.lastState=e,this.currentIndex<this.states.length-1&&(this.states=this.states.slice(0,this.currentIndex+1)),this.states.push(e),this.states.length>this.maxStates?(this.states.shift(),this.currentIndex=Math.max(0,this.currentIndex-1)):this.currentIndex++,this.updateButtons(),console.log(`历史记录: 添加状态 #${this.currentIndex}, 总状态数: ${this.states.length}`))},undo:function(){if(this.currentIndex>0){this.currentIndex--,this.isUndoRedo=!0;const e=this.states[this.currentIndex];i.value=e,this.lastState=e,B(),D(),w(),this.updateButtons(),console.log(`历史记录: 撤销到状态 #${this.currentIndex}`)}},redo:function(){if(this.currentIndex<this.states.length-1){this.currentIndex++,this.isUndoRedo=!0;const e=this.states[this.currentIndex];i.value=e,this.lastState=e,B(),D(),w(),this.updateButtons(),console.log(`历史记录: 重做到状态 #${this.currentIndex}`)}},updateButtons:function(){u.disabled=this.currentIndex<=0,h.disabled=this.currentIndex>=this.states.length-1},clear:function(){this.states=[],this.currentIndex=-1,this.lastState=null,this.isUndoRedo=!1,this.updateButtons()}};let g=null,y=!1;const v=5e3;let b=!1,k=!1,x=!0;const E=o((function(){B()}),100),I=o((function(){w()}),50),L=(o((function(e){C(e)}),50),o((function(){w()}),30)),S=o((function(){$()}),300);function w(){const e=i.value.split("\n"),t=e.length,n=i.selectionStart;let o=1,r=0;for(let t=0;t<e.length;t++)if(r+=e[t].length+1,r>n){o=t+1;break}s.innerHTML="";for(let e=1;e<=t;e++){const t=document.createElement("div");t.textContent=e,t.className="line-number",e===o&&t.classList.add("active-line"),s.appendChild(t)}const d=n-(r-(e[o-1]||"").length-1);l.textContent=`行: ${o}, 列: ${d}`}marked.use({breaks:!0,gfm:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1,mangle:!1});const T=document.getElementById("current-line-highlight");function B(){try{const e=i.value;if(r.dataset.lastContent===e)return;r.dataset.lastContent=e;const t=performance.now(),n=marked.parse(e),o=performance.now()-t;r.innerHTML=`<div class="markdown-body">${n}</div>`,function(){if("IntersectionObserver"in window){const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.classList.contains("hljs")||hljs.highlightElement(n),t.unobserve(n)}}))}),{rootMargin:"200px 0px"});document.querySelectorAll("pre code").forEach((t=>{e.observe(t)}))}else document.querySelectorAll("pre code").forEach((e=>{hljs.highlightElement(e)}))}(),r.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(((e,t)=>{e.id||(e.id=`header-${t}`)})),e.length>5e3&&function(){const e=r.querySelector(".markdown-body");if(e&&"IntersectionObserver"in window){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.remove("md-hidden")}))}),{root:r,rootMargin:"200px 0px",threshold:.01});e.querySelectorAll("p, h1, h2, h3, h4, h5, h6, ul, ol, pre, blockquote, table").forEach((e=>{e.classList.add("md-hidden"),t.observe(e)}))}}(),S(),G.recordMetric("renderTime",o)}catch(e){console.error("Markdown 渲染错误:",e),r.innerHTML=`<div class="markdown-body"><p>渲染错误: ${e.message}</p></div>`}}function $(){const e=i.value.substring(0,200);if(e===n.text)return void(document.title!==n.title&&(document.title=n.title));let t=null;const o=e.match(/^(#{1,6})\s+([^\n]+)/m);if(o&&o[2])t=o[2].trim();else{const n=e.match(/^([^\n]+)\n={3,}$/m);if(n&&n[1])t=n[1].trim();else{const n=e.match(/^([^\n]+)\n-{3,}$/m);n&&n[1]&&(t=n[1].trim())}}let r="MarkDown 编辑器";t&&(t.length>50&&(t=t.substring(0,47)+"..."),r=`${t} - MarkDown 编辑器`),n.text=e,n.title=r,document.title!==r&&(document.title=r)}function C(e=!0){if(x)if(e){const e=function(){const e=i.value,t=i.selectionStart,n=e.split("\n");let o=0,r=0,s=-1,d=0,l="";for(let e=0;e<n.length;e++){const i=n[e];r+=i.length+1;const c=i.match(/^(#{1,6})\s+(.+)$/);if(c&&(s=e,d=c[1].length,l=c[2].trim()),r>t){o=e;break}}return s>=0?{index:s,level:d,text:l}:null}();if(e){const t=e.text,n=Array.from(r.querySelectorAll("h1, h2, h3, h4, h5, h6"));for(const e of n)if(e.textContent.trim()===t)return void e.scrollIntoView({behavior:"auto",block:"start"})}const t=i.scrollTop/(i.scrollHeight-i.clientHeight||1)*(r.scrollHeight-r.clientHeight||1);requestAnimationFrame((()=>{r.scrollTop=t}))}else{const e=r.scrollTop/(r.scrollHeight-r.clientHeight||1)*(i.scrollHeight-i.clientHeight||1);requestAnimationFrame((()=>{i.scrollTop=e,s.scrollTop=i.scrollTop}))}}T&&T.remove(),i.addEventListener("input",(function(e){D(),E(),I(),p.addState(i.value),y&&j()})),i.addEventListener("paste",(function(e){setTimeout((()=>{p.addState(i.value)}),0)})),i.addEventListener("cut",(function(e){setTimeout((()=>{p.addState(i.value)}),0)}));let M=null;i.addEventListener("wheel",(function(e){k||(clearTimeout(M),s.scrollTop=i.scrollTop,x&&(b=!0,M=setTimeout((()=>{C(!0),setTimeout((()=>{b=!1}),300)}),50)))}),{passive:!0}),r.addEventListener("wheel",(function(e){b||(clearTimeout(M),x&&(k=!0,M=setTimeout((()=>{C(!1),setTimeout((()=>{k=!1}),300)}),50)))}),{passive:!0});let H=null;function D(){d.textContent=`字符数: ${i.value.length}`}function q(e,t=3e3){m.textContent=e,m.classList.add("show"),t>0&&setTimeout((()=>{m.classList.remove("show")}),t)}function U(e="已保存",t=3e3){a.textContent=e,a.classList.add("show"),setTimeout((()=>{a.classList.remove("show")}),t)}function j(){clearInterval(g),g=setInterval(A,v)}function A(){""!==i.value.trim()&&(localStorage.setItem("markdown-editor-content",i.value),U("已自动保存"))}function K(){const e=i.value;localStorage.setItem("markdown-editor-content",e),U("已保存到浏览器")}i.addEventListener("scroll",(function(){k||M||(clearTimeout(H),s.scrollTop=i.scrollTop,x&&(b=!0,H=setTimeout((()=>{C(!0),setTimeout((()=>{b=!1}),300)}),50)),L())})),r.addEventListener("scroll",(function(){b||M||(clearTimeout(H),x&&(k=!0,H=setTimeout((()=>{C(!1),setTimeout((()=>{k=!1}),300)}),50)))})),i.addEventListener("click",w),i.addEventListener("keyup",(function(e){w()})),i.addEventListener("scroll",(function(){s.scrollTop=i.scrollTop,L()})),window.addEventListener("resize",(function(){I()})),document.getElementById("bold-btn").addEventListener("click",(function(){Y("**","**","粗体文本")})),document.getElementById("italic-btn").addEventListener("click",(function(){Y("*","*","斜体文本")})),document.getElementById("heading-btn").addEventListener("click",(function(){Y("## ","","标题")})),document.getElementById("link-btn").addEventListener("click",(function(){Y("[","](https://example.com)","链接文本")})),document.getElementById("image-btn").addEventListener("click",(function(){Y("![","](https://example.com/image.jpg)","图片描述")})),document.getElementById("list-btn").addEventListener("click",(function(){Y("- ","","列表项")})),document.getElementById("ordered-list-btn").addEventListener("click",(function(){Y("1. ","","列表项")})),document.getElementById("quote-btn").addEventListener("click",(function(){Y("> ","","引用文本")})),document.getElementById("code-btn").addEventListener("click",(function(){Y("```javascript\n","\n```",'console.log("Hello, World!");')})),document.getElementById("table-btn").addEventListener("click",(function(){Y("","","| 标题1 | 标题2 | 标题3 |\n| ----- | ----- | ----- |\n| 内容1 | 内容2 | 内容3 |\n| 内容4 | 内容5 | 内容6 |")})),u.addEventListener("click",(function(){console.log("撤销按钮点击"),p.undo()})),h.addEventListener("click",(function(){console.log("重做按钮点击"),p.redo()})),f.addEventListener("click",(function(){y=!y,y?(c.textContent="自动保存: 开启 (5秒)",f.innerHTML='<i class="fas fa-clock" style="color: #4CAF50;"></i>',j(),U("自动保存已开启"),localStorage.setItem("markdown-editor-autosave","true")):(c.textContent="自动保存: 关闭",f.innerHTML='<i class="fas fa-clock"></i>',clearInterval(g),U("自动保存已关闭"),localStorage.setItem("markdown-editor-autosave","false"))})),document.getElementById("save-btn").addEventListener("click",K),document.getElementById("export-md-btn").addEventListener("click",(function(){const e=i.value,t=new Blob([e],{type:"text/markdown"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="markdown-document.md",o.click(),URL.revokeObjectURL(n),U("已导出为Markdown文件")})),document.getElementById("export-pdf-btn").addEventListener("click",(function(){q("正在生成PDF，请稍候...",0);const e=document.createElement("div");e.className="markdown-body pdf-export",e.innerHTML=r.innerHTML;const t=document.getElementById("code-theme").href,n=(document.body.classList.contains("light-theme"),document.createElement("style"));n.textContent="\n            .pdf-export {\n                font-family: 'LXGW WenKai', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\n                line-height: 1.6;\n                color: #24292e;\n                font-size: 14px;\n                padding: 20px;\n                background-color: white;\n            }\n            .pdf-export h1, .pdf-export h2, .pdf-export h3, .pdf-export h4, .pdf-export h5, .pdf-export h6 {\n                margin-top: 24px;\n                margin-bottom: 16px;\n                font-weight: 600;\n                line-height: 1.25;\n            }\n            .pdf-export h1 {\n                font-size: 2em;\n                padding-bottom: 0.3em;\n                border-bottom: 1px solid #eaecef;\n            }\n            .pdf-export h2 {\n                font-size: 1.5em;\n                padding-bottom: 0.3em;\n                border-bottom: 1px solid #eaecef;\n            }\n            .pdf-export h3 { font-size: 1.25em; }\n            .pdf-export h4 { font-size: 1em; }\n            .pdf-export h5 { font-size: 0.875em; }\n            .pdf-export h6 { font-size: 0.85em; color: #6a737d; }\n            .pdf-export p { margin-bottom: 16px; }\n            .pdf-export a { color: #0366d6; text-decoration: none; }\n            .pdf-export blockquote {\n                padding: 0 1em;\n                color: #6a737d;\n                border-left: 0.25em solid #dfe2e5;\n                margin: 0 0 16px 0;\n            }\n            .pdf-export ul, .pdf-export ol {\n                padding-left: 2em;\n                margin-bottom: 16px;\n            }\n            .pdf-export li { margin-top: 0.25em; }\n            .pdf-export pre {\n                background-color: #f6f8fa;\n                border-radius: 3px;\n                padding: 16px;\n                overflow: auto;\n                font-size: 85%;\n                line-height: 1.45;\n                margin-bottom: 16px;\n                page-break-inside: avoid;\n            }\n            .pdf-export code {\n                background-color: rgba(27, 31, 35, 0.05);\n                border-radius: 3px;\n                font-family: SFMono-Regular, Consolas, \"Liberation Mono\", Menlo, monospace;\n                font-size: 85%;\n                padding: 0.2em 0.4em;\n            }\n            .pdf-export pre code {\n                background-color: transparent;\n                padding: 0;\n                border-radius: 0;\n            }\n            .pdf-export table {\n                border-collapse: collapse;\n                width: 100%;\n                margin-bottom: 16px;\n                page-break-inside: avoid;\n            }\n            .pdf-export table th, .pdf-export table td {\n                padding: 6px 13px;\n                border: 1px solid #dfe2e5;\n            }\n            .pdf-export table tr:nth-child(2n) {\n                background-color: #f6f8fa;\n            }\n            .pdf-export img {\n                max-width: 100%;\n                box-sizing: content-box;\n                page-break-inside: avoid;\n            }\n            .pdf-export hr {\n                height: 0.25em;\n                padding: 0;\n                margin: 24px 0;\n                background-color: #e1e4e8;\n                border: 0;\n            }\n            /* 确保分页时标题不会被分割 */\n            .pdf-export h1, .pdf-export h2, .pdf-export h3,\n            .pdf-export h4, .pdf-export h5, .pdf-export h6 {\n                page-break-after: avoid;\n                page-break-inside: avoid;\n            }\n            .pdf-export p, .pdf-export blockquote {\n                orphans: 3;\n                widows: 3;\n            }\n        ";const o=document.createElement("link");o.rel="stylesheet",o.href=t,document.head.appendChild(o),document.body.appendChild(n),document.body.appendChild(e),e.querySelectorAll("pre code").forEach((e=>{hljs.highlightElement(e)})),html2pdf().set({margin:[15,15,15,15],filename:"markdown-document.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,logging:!1},jsPDF:{unit:"mm",format:"a4",orientation:"portrait",compress:!0}}).from(e).save().then((()=>{document.body.removeChild(e),document.body.removeChild(n),document.head.removeChild(o),U("已导出为PDF文件"),function(){const e=document.getElementById("notification");e.classList.remove("show")}()})).catch((t=>{console.error("PDF导出错误:",t),document.body.removeChild(e),document.body.removeChild(n),document.head.removeChild(o),q("PDF导出失败: "+t.message)}))}));const R="light",z="dark",F="auto";let O=R;function N(e){const t=document.body,n=document.getElementById("theme-btn"),o=document.getElementById("code-theme");e===F&&(e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z:R),e===z?(t.classList.remove("light-theme"),t.classList.add("dark-theme"),n.innerHTML='<i class="fas fa-sun"></i>',o.href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"):(t.classList.remove("dark-theme"),t.classList.add("light-theme"),n.innerHTML='<i class="fas fa-moon"></i>',o.href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css"),w()}document.getElementById("theme-btn").addEventListener("click",(function(){O===R?(O=z,q("已切换到暗色主题")):O===z?(O=F,q("已切换到自动主题（跟随系统）"),document.getElementById("theme-btn").innerHTML='<i class="fas fa-adjust"></i>'):(O=R,q("已切换到亮色主题")),N(O),localStorage.setItem("markdown-editor-theme",O)}));const P=document.getElementById("shortcut-help"),Z=document.getElementById("help-btn"),W=document.querySelector(".close"),X=document.getElementById("shortcut-table").querySelector("tbody");function Y(e,t,n){const o=i.selectionStart,r=i.selectionEnd,s=i.value.substring(o,r),d=s||n;i.value=i.value.substring(0,o)+e+d+t+i.value.substring(r),i.selectionStart=o+e.length,i.selectionEnd=o+e.length+d.length,i.focus(),B(),D(),w(),p.addState(i.value)}Z.addEventListener("click",(function(){X.innerHTML="",[{key:`${t}+B`,action:"粗体"},{key:`${t}+I`,action:"斜体"},{key:`${t}+K`,action:"链接"},{key:`${t}+Shift+I`,action:"图片"},{key:`${t}+\``,action:"行内代码"},{key:`${t}+Shift+C`,action:"代码块"},{key:`${t}+Shift+B`,action:"引用块"},{key:`${t}+Shift+L`,action:"无序列表"},{key:`${t}+Shift+O`,action:"有序列表"},{key:`${t}+Shift+T`,action:"表格"},{key:`${t}+1 到 ${t}+6`,action:"标题 1-6"},{key:`${t}+Shift+X`,action:"删除线"},{key:`${t}+Shift+H`,action:"水平分割线"},{key:`${t}+Shift+K`,action:"任务列表"},{key:`${t}+S`,action:"保存"},{key:`${t}+Z`,action:"撤销"},{key:`${t}+Y 或 ${t}+Shift+Z`,action:"重做"}].forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td"),o=document.createElement("td");n.textContent=e.key,o.textContent=e.action,t.appendChild(n),t.appendChild(o),X.appendChild(t)})),P.style.display="block"})),W.addEventListener("click",(function(){P.style.display="none"})),window.addEventListener("click",(function(e){e.target===P&&(P.style.display="none")})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&"block"===P.style.display&&(P.style.display="none")}));const G={renderTime:[],scrollSyncTime:[],lineNumberUpdateTime:[],titleUpdateTime:[],recordMetric:function(e,t){this[e]&&(this[e].push(t),this[e].length>50&&this[e].shift())},getAverage:function(e){if(!this[e]||0===this[e].length)return 0;return this[e].reduce(((e,t)=>e+t),0)/this[e].length},getReport:function(){return{averageRenderTime:this.getAverage("renderTime").toFixed(2)+"ms",averageScrollSyncTime:this.getAverage("scrollSyncTime").toFixed(2)+"ms",averageLineNumberUpdateTime:this.getAverage("lineNumberUpdateTime").toFixed(2)+"ms",averageTitleUpdateTime:this.getAverage("titleUpdateTime").toFixed(2)+"ms"}},logReport:function(){console.log("性能报告:",this.getReport())}};function V(e,t){return function(...n){const o=performance.now(),i=e.apply(this,n),r=performance.now();return G.recordMetric(t,r-o),i}}B=V(B,"renderTime");C=V(C,"scrollSyncTime");w=V(w,"lineNumberUpdateTime");$=V($,"titleUpdateTime"),"devper"===window.AppConfig.version&&setInterval((()=>{G.logReport()}),6e4),document.addEventListener("keydown",(function(t){const n=document.activeElement===i,o=e?t.metaKey:t.ctrlKey;if(o&&"z"===t.key&&!t.shiftKey&&(t.preventDefault(),p.undo()),(o&&"y"===t.key||o&&t.shiftKey&&"z"===t.key)&&(t.preventDefault(),p.redo()),o&&"s"===t.key&&(t.preventDefault(),K()),n){if(o&&"b"===t.key&&(t.preventDefault(),Y("**","**","粗体文本")),o&&"i"===t.key&&(t.preventDefault(),Y("*","*","斜体文本")),o&&"k"===t.key&&(t.preventDefault(),Y("[","](https://example.com)","链接文本")),o&&t.shiftKey&&"I"===t.key&&(t.preventDefault(),Y("![","](https://example.com/image.jpg)","图片描述")),o&&t.shiftKey&&"C"===t.key&&(t.preventDefault(),Y("```\n","\n```","代码块")),o&&"`"===t.key&&(t.preventDefault(),Y("`","`","行内代码")),o&&t.shiftKey&&"B"===t.key&&(t.preventDefault(),Y("> ","","引用文本")),o&&t.shiftKey&&"L"===t.key&&(t.preventDefault(),Y("- ","","列表项")),o&&t.shiftKey&&"O"===t.key&&(t.preventDefault(),Y("1. ","","列表项")),o&&t.shiftKey&&"T"===t.key){t.preventDefault();Y("","","| 标题1 | 标题2 | 标题3 |\n| ----- | ----- | ----- |\n| 内容1 | 内容2 | 内容3 |\n| 内容4 | 内容5 | 内容6 |")}if(o&&t.key>="1"&&t.key<="6"){t.preventDefault();const e=t.key;Y("#".repeat(parseInt(e))+" ","","标题")}o&&t.shiftKey&&"X"===t.key&&(t.preventDefault(),Y("~~","~~","删除线文本")),o&&t.shiftKey&&"H"===t.key&&(t.preventDefault(),Y("\n---\n","","")),o&&t.shiftKey&&"K"===t.key&&(t.preventDefault(),Y("- [ ] ","","任务项"))}})),document.getElementById("bold-btn").title=`粗体 (${t}+B)`,document.getElementById("italic-btn").title=`斜体 (${t}+I)`,document.getElementById("heading-btn").title=`标题 (${t}+1 到 ${t}+6)`,document.getElementById("link-btn").title=`链接 (${t}+K)`,document.getElementById("image-btn").title=`图片 (${t}+Shift+I)`,document.getElementById("list-btn").title=`无序列表 (${t}+Shift+L)`,document.getElementById("ordered-list-btn").title=`有序列表 (${t}+Shift+O)`,document.getElementById("quote-btn").title=`引用 (${t}+Shift+B)`,document.getElementById("code-btn").title=`代码块 (${t}+Shift+C)`,document.getElementById("table-btn").title=`表格 (${t}+Shift+T)`,document.getElementById("save-btn").title=`保存 (${t}+S)`,document.getElementById("undo-btn").title=`撤销 (${t}+Z)`,document.getElementById("redo-btn").title=`重做 (${t}+Y 或 ${t}+Shift+Z)`,function(){p.clear();const e=localStorage.getItem("markdown-editor-content");i.value=e||"# 欢迎使用 Markdown 编辑器\n\n## 基本语法演示\n\n1. **粗体文本**\n2. *斜体文本*\n3. ~~删除线~~\n\n### 列表示例\n- 项目 1\n- 项目 2\n  - 子项目 A\n  - 子项目 B\n\n### 代码示例\n```javascript\nconsole.log('Hello, Markdown!');\n```\n\n### 表格示例\n| 标题1 | 标题2 | 标题3 |\n| ----- | ----- | ----- |\n| 内容1 | 内容2 | 内容3 |\n| 内容4 | 内容5 | 内容6 |\n\n> 这是一个引用示例\n\n[点击访问](https://www.example.com)\n";const t=localStorage.getItem("markdown-editor-theme");O=t||R,N(O),O===F&&(document.getElementById("theme-btn").innerHTML='<i class="fas fa-adjust"></i>'),function(){if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",(e=>{O===F&&N(F)}))}catch(t){try{e.addListener((e=>{O===F&&N(F)}))}catch(e){console.error("无法添加主题变化监听器",e)}}}}(),"true"===localStorage.getItem("markdown-editor-autosave")&&(y=!0,c.textContent="自动保存: 开启 (5秒)",f.innerHTML='<i class="fas fa-clock" style="color: #4CAF50;"></i>',j()),B(),D(),w(),S(),p.addState(i.value),console.log("历史记录已初始化"),u.disabled=!0,h.disabled=!0,function(){const e=document.querySelector(".toolbar .spacer"),t=document.createElement("button");t.id="sync-btn",t.title="滚动同步 (已启用)",t.innerHTML='<i class="fas fa-link"></i>',t.classList.add("active"),t.addEventListener("click",(function(){x=!x,x?(t.title="滚动同步 (已启用)",t.classList.add("active"),t.innerHTML='<i class="fas fa-link"></i>',q("滚动同步已启用")):(t.title="滚动同步 (已禁用)",t.classList.remove("active"),t.innerHTML='<i class="fas fa-unlink"></i>',q("滚动同步已禁用"))})),e.parentNode.insertBefore(t,e.nextSibling)}()}()}));