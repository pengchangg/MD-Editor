const LineNumbersModule={init:function(){this.debouncedUpdateLineNumbers=UIUtils.debounce(this.updateLineNumbers.bind(this),50),window.AppElements.editor.addEventListener("scroll",this.handleEditorScroll.bind(this));const e=window.AppElements.editor;e.addEventListener("click",this.updateLineNumbers.bind(this)),e.addEventListener("keyup",this.updateLineNumbers.bind(this)),e.addEventListener("mouseup",this.updateLineNumbers.bind(this)),e.addEventListener("select",this.updateLineNumbers.bind(this)),e.addEventListener("selectionchange",this.updateLineNumbers.bind(this))},handleEditorScroll:function(){UIUtils.debounce(this.updateLineNumbers.bind(this),30)()},updateLineNumbers:function(){const e=performance.now(),t=window.AppElements.editor,n=window.AppElements.lineNumbers,i=(window.AppElements.cursorPosition,t.value.split("\n")),s=i.length,d=t.selectionStart;let o=1,r=0;for(let e=0;e<i.length;e++)if(r+=i[e].length+1,r>d){o=e+1;break}n.innerHTML="";for(let e=1;e<=s;e++){const t=document.createElement("div");t.textContent=e,t.className="line-number",t.setAttribute("data-line",e),e===o&&t.classList.add("active-line"),n.appendChild(t)}const l=d-(r-(i[o-1]||"").length-1),u=document.getElementById("line-pos"),c=document.getElementById("col-pos");u&&(u.textContent=o),c&&(c.textContent=l);const a=performance.now();PerformanceModule.recordMetric("lineNumberUpdateTime",a-e)}};